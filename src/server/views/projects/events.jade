extends ../layouts/main.jade

block submenu
  li
    a.button.tiny(href="/events/public.ics") Eksporter til kalenderprogram

block content
  .row
    .columns
      #events
        for event in events
          .event(data-id=event.id)
            h2= event.title
            p= moment(event.start).format('LLL')
              if event.end
                | &nbsp;â€“&nbsp;
                = moment(event.end).format('LLL')
            p= event.location
            p= event.tags
            if event.mdtext
              != marked(event.mdtext)

  script#template(type="text/ractive")
    | {{#events}}
    article
      header
        | {{{calendarday(.start)}}}
        h2
          a(href="/events/{{_id}}") {{title}}
          small
            | ,&nbsp;
            | {{#location}}
            | {{location}}&nbsp;
            | {{/location}}
        .meta
          .right
            permissionicons(permissions="{{permissions}}")
          | {{{daterange(start, end)}}}
          | {{#tags}}
          | {{#.}}
          i.fa.fa-tag
          | &nbsp;
          a(href="{{taglink(.)}}")
            | {{.}}
          | {{/.}}
          | {{/tags}}
      .content
        .row
          .columns
            | {{{marked(mdtext)}}}
    | {{/events}}

    | {{#gotall}}
    #end.alert-box.info(data-alert) Vi har ikke mer planlagt
    | {{/gotall}}
    | {{^gotall}}
    a#fetchbutton.button(on-click="fetchMore") Hent neste sesong
    | {{/gotall}}

block javascript
  script
    | require('s7n').projects.upcomingView(
    != JSON.stringify(events)
    | );
